<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amar's Blog</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f3f4f6;
            padding: 20px;
            margin: 0;
        }

        #placeholder-blogs {
            margin-top: 20px;
        }

        .blog-container {
            background-color: #ffffff;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            padding: 16px;
            margin-bottom: 16px;
        }

        .title-date-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .title-link {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1d4ed8;
            text-decoration: none;
        }

        .title-link:hover {
            text-decoration: underline;
        }

        .date-element {
            font-size: 0.875rem;
            color: #6b7280;
        }

        .tags-container {
            margin-top: 8px;
        }

        .tag {
            display: inline-block;
            background-color: #1d4ed8;
            color: #ffffff;
            font-size: 0.75rem;
            padding: 4px 8px;
            border-radius: 9999px;
            margin-right: 8px;
            cursor: pointer;
        }

        .filter-container {
            margin-bottom: 16px;
        }

        .filter-pill {
            display: inline-block;
            background-color: #e5e7eb;
            color: #374151;
            font-size: 0.75rem;
            padding: 4px 12px;
            border-radius: 9999px;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <!-- Filter Container -->
    <div id="filter-container" class="filter-container"></div>

    <!-- Blog Summaries Placeholder -->
    <div id="placeholder-blogs"></div>

    <script>
        // Define tags and myStructure
        var tags = {
            "1": "Logging Thoughts",
            "2": "Software, data and applications",
            "3": "Travel and Food",
            "4": "Business"
        };

        var myStructure = [
            {
                id: "1",
                title: "A Canvas of Thoughts",
                tags: [1],
                link: "https://handy-iguanadon-b8c.notion.site/A-canvas-of-thoughts-a3f79362768747ab8a7375b9d9e40cf3",
                date: "August 11, 2024 9:05 PM"
            }
        ];

        let selectedTag = null;

        function generateBlogSummaries() {
            const placeholder = document.getElementById("placeholder-blogs");
            placeholder.innerHTML = ""; // Clear existing content

            // Filtered articles
            const filteredBlogs = selectedTag
                ? myStructure.filter(blog => blog.tags.includes(selectedTag))
                : myStructure;

            filteredBlogs.forEach(blog => {
                // Create container
                const blogContainer = document.createElement("div");
                blogContainer.className = "blog-container";

                // Create title and date container
                const titleDateContainer = document.createElement("div");
                titleDateContainer.className = "title-date-container";

                // Create title link
                const titleLink = document.createElement("a");
                titleLink.href = blog.link;
                titleLink.innerText = blog.title;
                titleLink.className = "title-link";
                titleLink.target = "_blank"; // Open in a new tab

                // Create date element
                const dateElement = document.createElement("div");
                dateElement.className = "date-element";
                dateElement.innerText = new Date(blog.date).toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });

                // Append title and date to the title-date container
                titleDateContainer.appendChild(titleLink);
                titleDateContainer.appendChild(dateElement);

                // Create tags container
                const tagsContainer = document.createElement("div");
                tagsContainer.className = "tags-container";
                blog.tags.forEach(tagId => {
                    const tag = document.createElement("span");
                    tag.className = "tag";
                    tag.innerText = tags[tagId];
                    tag.onclick = () => {
                        selectedTag = tagId;
                        renderFilter();
                        generateBlogSummaries();
                    };
                    tagsContainer.appendChild(tag);
                });

                // Append elements to blog container
                blogContainer.appendChild(titleDateContainer);
                blogContainer.appendChild(tagsContainer);

                // Append blog container to placeholder
                placeholder.appendChild(blogContainer);
            });
        }

        function renderFilter() {
            const filterContainer = document.getElementById("filter-container");
            filterContainer.innerHTML = ""; // Clear existing content

            if (selectedTag) {
                const filterPill = document.createElement("div");
                filterPill.className = "filter-pill";
                filterPill.innerText = `${tags[selectedTag]} Ã—`;
                filterPill.onclick = () => {
                    selectedTag = null;
                    renderFilter();
                    generateBlogSummaries();
                };
                filterContainer.appendChild(filterPill);
            }
        }

        // Call the function to generate summaries on page load
        window.onload = () => {
            renderFilter();
            generateBlogSummaries();
        };
    </script>
</body>

</html>
